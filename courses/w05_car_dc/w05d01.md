***5주차 1일짜 20190610 수업***

***20190610 마지막업데이트***

# Week 5 - Day 1 - 차량용 프로세서 디바이스 제어

* https://diginomica.com/softbank-shows-that-arms-future-will-remain-mobile-centric
* https://www.arm.com/company/news/2017/04/driving-next-generation-image-processing-for-automotive
* https://youtu.be/_JRMYZyFxjI?t=912

1. `Ubuntu14.04.5.vmwarevm.7z` 압축풀면 31GB 필요
2. `Ubuntu14.04.5.vmx` 실행 후 프로세서 4개로 바꾸고
3. 아래 내용 작성
    ```linux
    $ cd Desktop/
    $ tar zxf ~/Document/MDS2450/m2450.tar.gz
    $ cd m2450/lab/student/00_base_runtime/
    $ make clean; make
    ```
4. file에 open Terminal - minicom

* `subl ~/.bashrc`
* `alias m='minicom -w -D/dev/ttyUSB0'` 을 `alias m='minicom -w -D/dev/ttyS1'` 으로 변경
* 터미널 다 닫고 다시 minicom 열어서 m 누르면 
    ```
    user@linux:~/Desktop/m2450/lab/student/00_base_runtime$ m

    Welcome to minicom 2.7

    OPTIONS: I18n 
    Compiled on Jan  1 2014, 17:13:22.
    Port /dev/ttyS1, 02:44:40

    Press CTRL-A Z for help on special keys
    ```
* 성공~
* MDS2450 연결하고

minicom

* 나오는 법 컨트롤+A , X 누르고 엔터
* `sudo rm /etc/udev/rules.d/70-persistent-net.rules`
* `[sudo] password for user: 1` 입력
* 컴퓨터 끄면 다시 만들어지는. 파일이다.
  * usb device 0x:0x
컴퓨터 리부팅 sudo reboot

터미널에서 
* `sudo subl /etc/udev/rules.d/70-persistent-net.rules` 입력
* 암호는 1
  ```
  # This file was automatically generated by the /lib/udev/write_net_rules
  # program, run by the persistent-net-generator.rules rules file.
  #
  # You can modify it, as long as you keep each rule on a single
  # line, and change only the value of the NAME= key.

  # USB device 0x:0x (asix)
  SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="00:00:00:00:1a:63", ATTR{dev_id}=="0x0", ATTR{type}=="1", KERNEL=="eth*", NAME="eth1"
  ```
  * `NAME="eth1"` , `asix` 잘 있는지 확인
  * 창 닫고
* ifconfig `eth1` 에서 `addr 192.168.0.2` 잘 있는지 확인


Tera Term 에서 입력
* `set bootdelay 1;set bootcmd 'tftp 30000000 MDS2450.bin;go 30000000' ;set serverip 192.168.0.2;set ipaddr = 192.168.0.3;save`

<!-- set bootdelay 1;set bootcmd 'tftp 30000000 MDS2450.bin;go 30000000' ;
set serverip 192.168.0.2;set ipaddr 192.168.0.3;save -->


이제 아래로

*set bootdelay 1;setenv bootcmd 'tftp 30000000 MDS2450.bin;go 30000000' ;set serverip 192.168.0.2;set ipaddr 192.168.0.3;save*

*cat /var/log/kern.log | grep tty*

*cat /etc/xinetd.d/tftp *
환경설정파일 이거 없으면 안들어야한다.


*sudo /etc/init.d/xinetd restart* 리눅스 네트워크 처리하는 서비스 데몬?
이렇게 하면 서버쪽 준비 끝

구글검색 `임베디드 tftp`

`cat /etc/udev/rules.d/70-persistent-net.rules`  장치생성

ipconfig 시스템상 가용가능 네트워크 확인

eth0 디폴트 네트워크 장치 윈도우즈랑 네트워크 카드 공유

eth1 아식스 뽑으면 안보인다.

그 파일이 자동생성된 이후에 eht1 이 생성된다. 

cat /etc/network/interfaces   읽어보면 eth1써라 써놨다.

```
auto lo
iface lo inet loopback
auto eth0
iface eth0 inet dhcp

allow-hotplug usb0
iface usb0 inet static
address 192.168.0.2
netmask 255.255.255.0
post-up service isc-dhcp-server reload

allow-hotplug eth1
iface eth1 inet static
address 192.168.0.2
netmask 255.255.255.0
gateway 192.168.0.1
#dns-nameservers 8.8.4.4 8.8.8.8
post-up service isc-dhcp-server reloaduser@linux:~/Desktop/m2450/lab/student/00_base_runtime$ 
```

꽂으면 장치는 보이지만 아이피는 없다. 

lo는 보인다. 루프백, 자기가 자기 자신

루프백장치 ping local host

리눅스에서도 아이피를 받아올 수 있데!

브릿지로 되어 있는 것을 NAT로 

sudo ifdown eth0 ifup eth0

eth0을 인터넷을 바꿔주면. 신발이 마스터로 바뀌면 인터넷 가능

---

핫플러그 디바이스 잘 꽂혔늕느 ㅈ회안

환경파일은 다 etc에 있다. 자동이 있지만 수동이 더 많다.


환경파일

네트워크 아이피 할당

etc.network/interfaces;

네트워크 동적장치 etc udev reles.d/70-persisten

#  

우분투에서에서 트리

tree -L 1


asfafasf

ffff

